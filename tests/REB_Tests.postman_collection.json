{
	"info": {
		"_postman_id": "a1998c02-c219-4c91-b114-7fe5b70eaa94",
		"name": "REB_Tests Copy",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "Платежи и переводы",
			"description": "",
			"item": [
				{
					"name": "Конвертация",
					"description": "",
					"item": [
						{
							"name": "Ставка конвертации",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "6e324b6e-e520-4b2a-ac87-cd7054ca951d",
										"type": "text/javascript",
										"exec": [
											"var jsonData = JSON.parse(responseBody);",
											"var schema = {",
											"    \"type\" : \"object\",",
											"    \"required\" : [\"from_amount\",\"to_amount\",\"exchange_rate\",\"first_currency\",\"second_currency\"],",
											"    \"properties\" :{",
											"        \"from_amount\" : {\"$ref\":\"#/definations/from_to_amount\"},",
											"        \"to_amount\" : {\"$ref\":\"#/definations/from_to_amount\"},",
											"        \"exchange_rate\" : {\"type\":\"number\"},",
											"        \"first_currency\" : {\"$ref\":\"#/definations/currency\"},",
											"        \"second_currency\" : {\"$ref\":\"#/definations/currency\"}",
											"    },",
											"    \"definations\" : {",
											"        \"from_to_amount\" : {",
											"            \"type\" : \"object\",",
											"            \"required\" : [\"amount\", \"currency\"],",
											"            \"properties\" : {",
											"                \"amount\":{\"type\":\"number\"},",
											"                \"currency\":{\"type\":\"string\", \"pattern\" : /^[A-Z]{3}/}",
											"            }",
											"        },",
											"        \"currency\" : {",
											"            \"type\" : \"object\",",
											"            \"required\" : [\"amount\", \"currency\"],",
											"            \"properties\" : {",
											"                \"amount\":{\"type\":\"string\"},",
											"                \"currency\":{\"type\":\"string\", \"pattern\" : /^[A-Z]{3}/}",
											"            }",
											"        }",
											"    }",
											"};",
											"",
											"",
											"//status is 200",
											"if(responseCode.code === 200){",
											"    tests[\"Status code is 200\"] = true;",
											"    // content type of response",
											"    if(postman.getResponseHeader(\"Content-Type\") === \"application/json\"){",
											"    tests[\"Content-Type is application/json\"] = true;",
											"        // response is not empty",
											"        if(responseBody !== ''){",
											"            //schema validate",
											"            tests[\"Body of response is not empty\"] = true;",
											"            tests[\"Schema is valid\"] = tv4.validate(jsonData.data, schema);",
											"            //check response time",
											"            if(responseTime < 5000){",
											"                tests[\"Response time is less than 5000ms\"] = true;",
											"            }else{",
											"                tests[\"Response time is less than 5000ms\"] = false;",
											"        }",
											"        }else{",
											"            tests[\"Body of response is not empty\"] = false;",
											"        }",
											"    }else{",
											"    tests[\"Content-Type is \" + postman.getResponseHeader(\"Content-Type\")] = false;",
											"}",
											"    ",
											"}else{",
											"    tests[\"Response code is \" + responseCode.code.toString()] = false;",
											"}"
										]
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "sessionid",
										"value": "{{sessionid}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n\"sum\": {\r\n\"amount\": 1000,\r\n\"currency\": \"RUR\"\r\n},\r\n\"from_currency\": \"RUR\",\r\n\"to_currency\": \"EUR\"\r\n}"
								},
								"url": "{{schema}}://{{host}}/bankapp/transactions/rates"
							},
							"response": []
						}
					],
					"_postman_isSubFolder": true
				},
				{
					"name": "Перевод по номеру телефона",
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{schema}}://{{host}}/bankapp/transactions/scheme_details?scheme_id=TransferByPhone&scheme_type=transfer",
							"protocol": "{{schema}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"bankapp",
								"transactions",
								"scheme_details"
							],
							"query": [
								{
									"key": "scheme_id",
									"value": "TransferByPhone"
								},
								{
									"key": "scheme_type",
									"value": "transfer"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "На любую карту",
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{schema}}://{{host}}/bankapp/transactions/scheme_details?scheme_id=TransferCardToCard&scheme_type=transfer",
							"protocol": "{{schema}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"bankapp",
								"transactions",
								"scheme_details"
							],
							"query": [
								{
									"key": "scheme_id",
									"value": "TransferCardToCard"
								},
								{
									"key": "scheme_type",
									"value": "transfer"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Между счетами и картами",
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{schema}}://{{host}}/bankapp/transactions/scheme_details?scheme_id=TransferPaymentInstruments&scheme_type=transfer",
							"protocol": "{{schema}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"bankapp",
								"transactions",
								"scheme_details"
							],
							"query": [
								{
									"key": "scheme_id",
									"value": "TransferPaymentInstruments"
								},
								{
									"key": "scheme_type",
									"value": "transfer"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Клиенту банка на счет",
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{schema}}://{{host}}/bankapp/transactions/scheme_details?scheme_id=TransferAccountClient&scheme_type=transfer",
							"protocol": "{{schema}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"bankapp",
								"transactions",
								"scheme_details"
							],
							"query": [
								{
									"key": "scheme_id",
									"value": "TransferAccountClient"
								},
								{
									"key": "scheme_type",
									"value": "transfer"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Пополнить с другой карты",
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{schema}}://{{host}}/bankapp/transactions/scheme_details?scheme_id=TransferFromExternalCard&scheme_type=transfer",
							"protocol": "{{schema}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"bankapp",
								"transactions",
								"scheme_details"
							],
							"query": [
								{
									"key": "scheme_id",
									"value": "TransferFromExternalCard"
								},
								{
									"key": "scheme_type",
									"value": "transfer"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Человеку на счет (физ лицу)",
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{schema}}://{{host}}/bankapp/transactions/scheme_details?scheme_id=TransferAnotherBankPh&scheme_type=transfer",
							"protocol": "{{schema}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"bankapp",
								"transactions",
								"scheme_details"
							],
							"query": [
								{
									"key": "scheme_id",
									"value": "TransferAnotherBankPh"
								},
								{
									"key": "scheme_type",
									"value": "transfer"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	]
}
